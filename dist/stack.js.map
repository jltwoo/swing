{"version":3,"sources":["stack.js"],"names":[],"mappings":";;;;;;;;;;;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAMA,IAAM,QAAQ,SAAR,KAAQ,CAAC,MAAD,EAAY;AACtB,QAAI,kBAAJ;QACI,qBADJ;QAEI,cAFJ;QAGI,qBAHJ;QAII,cAJJ;;AAMA,gBAAY,qBAAM;AACd,gBAAQ,EAAR;AACA,uBAAe,IAAI,kBAAQ,YAAZ,EAAf;AACA,uBAAe,uBAAf;AACA,gBAAQ,EAAR;AACH,KALD;;AAOA;;;;;;;AAOA,UAAM,SAAN,GAAkB,YAAM;AACpB,eAAO,MAAP;AACH,KAFD;;;;;;;AASA,UAAM,eAAN,GAAwB,YAAM;AAC1B,eAAO,YAAP;AACH,KAFD;;;;;;;;;AAWA,UAAM,EAAN,GAAW,UAAC,SAAD,EAAY,QAAZ,EAAyB;AAChC,qBAAa,EAAb,CAAgB,SAAhB,EAA2B,QAA3B;AACH,KAFD;;;;;;;;AAUA,UAAM,UAAN,GAAmB,UAAC,OAAD,EAAa;AAC5B,YAAM,OAAO,oBAAK,KAAL,EAAY,OAAZ,CAAb;AACA,YAAM,SAAS,CACX,UADW,EAEX,aAFW,EAGX,cAHW,EAIX,eAJW,EAKX,SALW,EAMX,YANW,EAOX,WAPW,EAQX,UARW,EASX,SATW,CAAf;;;AAaA,eAAO,OAAP,CAAe,UAAC,SAAD,EAAe;AAC1B,iBAAK,EAAL,CAAQ,SAAR,EAAmB,UAAC,IAAD,EAAU;AACzB,6BAAa,OAAb,CAAqB,SAArB,EAAgC,IAAhC;AACH,aAFD;AAGH,SAJD;;AAMA,cAAM,IAAN,CAAW;AACP,4BADO;AAEP;AAFO,SAAX;;AAKA,eAAO,IAAP;AACH,KA3BD;;;;;;;;AAmCA,UAAM,OAAN,GAAgB,UAAC,OAAD,EAAa;AACzB,YAAM,QAAQ,oBAAO,KAAP,EAAc;AACxB;AADwB,SAAd,CAAd;;AAIA,YAAI,KAAJ,EAAW;AACP,mBAAO,MAAM,IAAb;AACH;;AAED,eAAO,IAAP;AACH,KAVD;;;;;;;;AAkBA,UAAM,WAAN,GAAoB,UAAC,IAAD,EAAU;AAC1B,eAAO,sBAAS,KAAT,EAAgB;AACnB;AADmB,SAAhB,CAAP;AAGH,KAJD;;AAMA,WAAO,KAAP;AACH,CA/GD;;kBAiHe,K","file":"stack.js","sourcesContent":["import _ from 'lodash';\r\nimport Sister from 'sister';\r\nimport rebound from 'rebound';\r\nimport Card from './card';\r\n\r\n/**\r\n * @param {Object} config Stack configuration.\r\n * @return {Object} An instance of Stack object.\r\n */\r\nconst Stack = (config) => {\r\n    let construct,\r\n        eventEmitter,\r\n        index,\r\n        springSystem,\r\n        stack;\r\n\r\n    construct = () => {\r\n        stack = {};\r\n        springSystem = new rebound.SpringSystem();\r\n        eventEmitter = Sister();\r\n        index = [];\r\n    };\r\n\r\n    construct();\r\n\r\n    /**\r\n     * Get the configuration object.\r\n     *\r\n     * @return {Object}\r\n     */\r\n    stack.getConfig = () => {\r\n        return config;\r\n    };\r\n\r\n    /**\r\n     * Get a singleton instance of the SpringSystem physics engine.\r\n     *\r\n     * @return {Sister}\r\n     */\r\n    stack.getSpringSystem = () => {\r\n        return springSystem;\r\n    };\r\n\r\n    /**\r\n     * Proxy to the instance of the event emitter.\r\n     *\r\n     * @param {String} eventName\r\n     * @param {String} listener\r\n     * @return {undefined}\r\n     */\r\n    stack.on = (eventName, listener) => {\r\n        eventEmitter.on(eventName, listener);\r\n    };\r\n\r\n    /**\r\n     * Creates an instance of Card and associates it with an element.\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @return {Card}\r\n     */\r\n    stack.createCard = (element) => {\r\n        const card = Card(stack, element);\r\n        const events = [\r\n            'throwout',\r\n            'throwoutend',\r\n            'throwoutleft',\r\n            'throwoutright',\r\n            'throwin',\r\n            'throwinend',\r\n            'dragstart',\r\n            'dragmove',\r\n            'dragend'\r\n        ];\r\n\r\n        // Proxy Card events to the Stack.\r\n        events.forEach((eventName) => {\r\n            card.on(eventName, (data) => {\r\n                eventEmitter.trigger(eventName, data);\r\n            });\r\n        });\r\n\r\n        index.push({\r\n            element,\r\n            card\r\n        });\r\n\r\n        return card;\r\n    };\r\n\r\n    /**\r\n     * Returns an instance of Card associated with an element.\r\n     *\r\n     * @param {HTMLElement} element\r\n     * @return {Card|null}\r\n     */\r\n    stack.getCard = (element) => {\r\n        const group = _.find(index, {\r\n            element\r\n        });\r\n\r\n        if (group) {\r\n            return group.card;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * Remove an instance of Card from the stack index.\r\n     *\r\n     * @param {Card} card\r\n     * @return {null}\r\n     */\r\n    stack.destroyCard = (card) => {\r\n        return _.remove(index, {\r\n            card\r\n        });\r\n    };\r\n\r\n    return stack;\r\n};\r\n\r\nexport default Stack;\r\n"]}